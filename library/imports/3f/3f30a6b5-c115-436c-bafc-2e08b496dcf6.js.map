{"version":3,"sources":["assets/script/register.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":[" \nimport { findStorage } from \"./tool/findStorage\";\nimport { spectacle, wicket, findControl } from \"./tool/findControl\";\nimport { fgData, storage } from \"./tool/findGameData\";\n\nconst { ccclass, property } = cc._decorator;\n \n@ccclass\nexport default class register extends cc.Component {\n\n    @property(cc.Node)\n    loading_bg: cc.Node = null;\n\n    @property(cc.Node)\n    loading_bg2: cc.Node = null;\n\n    @property(cc.Sprite)\n    loaging_bar_yellow: cc.Sprite = null;\n\n    @property(cc.Node)\n    loadingBox: cc.Node = null;\n\n    @property(cc.Node)\n    gotoHallBox: cc.Node = null;\n\n    @property(cc.Node)\n    loading_play: cc.Node = null;\n\n    private resNum = 6;\n    private nowNum = 0;\n\n    start() {\n        if (cc.sys.platform === cc.sys.IPAD) {\n            this.getComponent(cc.Canvas).fitHeight = false;\n            this.getComponent(cc.Canvas).fitWidth = true;\n        }\n        findControl.adapterBg(this.loading_bg);\n        findControl.adapterBg(this.loading_bg2);\n        findControl.findSoundTool.initBtnClickEffect();\n        findControl.findSoundTool.initbgmMusic();\n\n        let playroomStorage = findStorage.getStorageJSON(storage.gamedata);\n        if (playroomStorage) {\n            fgData.userData = playroomStorage;\n        }\n\n        findControl.setsceneNode(this.node);\n\n        if (!fgData.userData.isClause) {\n            this.gotoHallBox.active = false;\n            this.loadingBox.active = false;\n            findControl.findResUtil.showDialog(wicket.BookPop, {\n                callback: () => {\n                    fgData.userData.isClause = true;\n                    this.gotoHallBox.active = true;\n                    this.loadingBox.active = false;\n                    fgData.storageData();\n                    cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n                }\n            });\n        } else {\n            this.gotoHallBox.active = true;\n            this.loadingBox.active = false;\n\n            cc.tween(this.loading_play).to(0.5, { scale: 1.1 }).to(0.5, { scale: 1 }).union().repeatForever().start();\n        }\n\n\n        fgData.setVideoFailCb(()=>{\n            cc.resources.load(\"prefeb/toast\", cc.Prefab, (err, prefab) => {\n                if (err) {\n                    return;\n                }\n                \n                let toast = cc.instantiate(prefab);\n                findControl.findResUtil.bindResAsset(toast, prefab);\n                let parentNode = findControl.getsceneNode();\n                if (toast && parentNode) {\n                    toast.active = true;\n                    parentNode.addChild(toast);\n                    let toastLabel = toast.getChildByName(\"label\");\n                    toastLabel.getComponent(cc.Label).string = \"Sorry, no ads available at the moment. Please try again later!\";\n                    cc.Tween.stopAllByTarget(toast);\n                    toast.opacity = 255;\n                    cc.tween(toast).to(0.15, { scale: 1.2 }).to(0.15, { scale: 1 }).delay(0.5).to(0.5, { opacity: 0 }).call(() => {\n                        toast.destroy();\n                    }).start();\n                }\n            })\n        });\n \n\n    }\n\n\n    onClick_gotoPlay() {\n        this.gotoHallBox.active = false;\n        this.loadingBox.active = true;\n        findControl.findSoundTool.commonBtnClick();\n\n        this.loaging_bar_yellow.fillRange = 0;\n        cc.Tween.stopAllByTarget(this.loaging_bar_yellow)\n        cc.loader.loadResDir(\"prefeb\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('prefeb assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"fineImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('finishImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"discoverImg\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            console.log('originalImg assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n        cc.loader.loadResDir(\"imgConfig\", (err, assets) => {\n            if (err) {\n                cc.error(err);\n                return;\n            }\n            fgData.levelAll = assets.length;\n            console.log('imgConfig assets in  have been loaded.');\n            this.progressBarEvent();\n        });\n\n        cc.director.preloadScene(spectacle.host, (err, assets) => {\n            cc.log(\"game scene preloaded\");\n            this.progressBarEvent();\n        });\n        cc.director.preloadScene(spectacle.parlour, (err, assets) => {\n            cc.log(\"hall scene preloaded\");\n            this.progressBarEvent();\n        });\n\n    }\n\n    progressBarEvent() {\n        let fill = 1 / 6;\n        this.nowNum++;\n        cc.Tween.stopAllByTarget(this.loaging_bar_yellow)\n        cc.tween(this.loaging_bar_yellow).to(0.5, { fillRange: fill * this.nowNum })\n            .call(() => {\n                if (this.nowNum == this.resNum) {\n                    this.scheduleOnce(() => {\n                        if (fgData.userData.isHall) {\n                            cc.director.loadScene(spectacle.parlour);\n                        } else {\n                            findControl.imgId = fgData.userData.level;\n                            cc.director.loadScene(spectacle.host);\n                        }\n                    }, 0.05)\n                }\n            }).start();\n    }\n\n\n    showShiPing() {\n        console.log(\"android---------------showShiPing------------------\")\n        fgData.showVideo(()=>{\n            console.log(\"zzzzzzzzzzzzzzzzzzzzwwwwwwwwwwwwwwwwwwwwwwwwwwwww\");\n          })\n    }\n\n\n    showbanner() {\n        console.log(\"android---------------showbanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showbanner\", \"()V\");\n    }\n\n\n    hidebanner() {\n        console.log(\"android---------------hidebanner------------------\")\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"hidebanner\", \"()V\");\n    }\n}\n\n"]}